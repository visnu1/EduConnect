import{c as n,j as e,L as b,O,r,g as P,u as _,a as M,b as D,R as L,d as h}from"./index-C5xKNvBc.js";import{S as y}from"./search-BsD5j5dG.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],R=n("clipboard-list",F);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],j=n("shopping-bag",z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Q=n("shopping-cart",E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],A=n("x",$),H=()=>e.jsxs("div",{className:"flex flex-wrap bg-gray-100 w-full min-h-screen h-auto",children:[e.jsxs("div",{className:"w-2/12 bg-white rounded p-3 shadow-lg",children:[e.jsx("div",{className:"gap-2 flex items-center justify-center space-x-4 p-2 mb-5",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"h-6 w-6 text-purple-500"}),e.jsx("h1",{className:"font-bold text-lg",children:"Pantry Pal"})]})}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsxs(b,{to:"/pantry/products",className:"flex items-center space-x-3 text-gray-700 p-2 rounded-md font-medium hover:bg-gray-200 focus:bg-gray-200 focus:shadow-outline",children:[e.jsx(j,{size:20}),e.jsx("span",{children:"Products"})]})}),e.jsx("li",{children:e.jsxs(b,{to:"/pantry/orders",className:"flex items-center space-x-3 text-gray-700 p-2 rounded-md font-medium hover:bg-gray-200 focus:bg-gray-200 focus:shadow-outline",children:[e.jsx(R,{size:20}),e.jsx("span",{children:"Orders"})]})})]})]}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"p-6 text-gray-500",children:e.jsx(O,{})})})]}),Y=JSON.parse(localStorage.getItem("student"))||[],q=()=>{const[c,o]=r.useState([]);return r.useEffect(()=>{(async()=>{try{const{results:d}=await P(Y.id);o(d)}catch(d){console.error("Failed to fetch products:",d),alert("Something went wrong!!")}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-black text-3xl font-bold",children:"Orders"})}),e.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-lg shadow-md max-w-5xl mx-auto my-8 font-sans",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Order History"}),e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 space-y-4 md:space-y-0 md:space-x-4",children:e.jsxs("div",{className:"relative flex-grow w-full md:w-auto",children:[e.jsx(y,{className:"absolute left-3.5 top-3 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"search",className:"block w-full p-3 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Order-ID"})]})}),e.jsx("div",{className:"border border-gray-200 rounded-md overflow-x-auto",children:e.jsxs("div",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-[50%_15%_15%_20%] gap-4 bg-gray-50 px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:[e.jsx("div",{className:"col-span-1",children:"Order ID"}),e.jsx("div",{className:"col-span-1",children:"Date"}),e.jsx("div",{className:"col-span-1",children:"Items"}),e.jsx("div",{className:"col-span-1",children:"Status"})]}),c&&c.map(a=>e.jsx("div",{className:"bg-white divide-y divide-gray-200",children:e.jsxs("div",{className:"grid grid-cols-[50%_15%_15%_20%] gap-4 px-4 sm:px-6 py-4 items-center hover:bg-gray-50",children:[e.jsxs("div",{className:"col-span-1 text-sm font-medium text-gray-900",children:["ORD-",a.orderId]}),e.jsx("div",{className:"col-span-1 text-sm text-gray-700",children:new Date(a.createdAt).toLocaleDateString()}),e.jsxs("div",{className:"col-span-1 text-sm text-gray-700",children:[a.orderDetails.length," items"]}),e.jsx("div",{className:"col-span-1",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${a.picked?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:a.picked?"Completed":"Pending"})})]})},a.orderId))]})})]})]})},T=()=>{const{user:c}=_(),[o,a]=r.useState([]),[d,v]=r.useState(""),[N,g]=r.useState([]),[l,i]=r.useState([]),[w,x]=r.useState(!1),[p,m]=r.useState([]);r.useEffect(()=>{(async()=>{try{const{results:t}=await M();a(t),g(t)}catch(t){console.error("Failed to fetch products:",t)}})()},[]);const k=s=>{const t=s.target.value.toLowerCase();v(t);const u=o.filter(f=>f.name.toLowerCase().includes(t)||f.description.toLowerCase().includes(t));g(u)},I=s=>{p.includes(s.itemId)||(i(t=>[...t,{...s,orderQuantity:1}]),m(t=>[...t,s.itemId]))},S=s=>{i(t=>t.filter(u=>u.itemId!==s))};r.useEffect(()=>{m(l.map(s=>s.itemId))},[l]);const C=async()=>{if(!(c&&c.id)){alert("Please Login to continue");return}const s={orderId:crypto.randomUUID(),studentId:c.id,createdAt:new Date().toISOString(),picked:!1,orderDetails:l.map(t=>({itemId:t.itemId,image:t.image}))};console.log(s);try{const t=await D(s);alert("Your order has been placed!"),console.log(t),i([]),m([]),x(!1)}catch(t){console.error("Something went wrong",t)}};return e.jsxs("div",{className:"space-y-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-black text-3xl font-bold",children:"Products"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{className:"flex relative px-4 py-2 text-sm font-medium leading-5 shadow text-black transition-colors duration-150 border border-transparent rounded-lg focus:outline-none focus:shadow-outline-blue",onClick:()=>x(!0),children:[l.length>0&&e.jsx("div",{className:"absolute right-0 -top-1",children:e.jsx("p",{className:"text-sm flex h-1 w-1 items-center justify-center rounded-full bg-red-500 p-2 text-xs text-white",children:l.reduce((s,t)=>s+t.orderQuantity,0)})}),e.jsx(Q,{className:"h-4 w-4"})]})})]}),e.jsxs("div",{children:[e.jsxs("form",{className:"max-w-md mx-auto",onSubmit:s=>s.preventDefault(),children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx(y,{className:"absolute left-3.5 top-3 h-5 w-5 text-muted-foreground"})}),e.jsx("input",{type:"search",id:"default-search",value:d,onChange:k,className:"block w-full p-3 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Products"}),e.jsx("button",{type:"submit",className:"text-white absolute end-2 top-1.5 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Search"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-10",children:N.map(s=>e.jsxs("div",{className:"rounded-lg bg-white text-card-foreground shadow-md overflow-hidden w-full lg:w-54",children:[e.jsx("div",{className:"w-full h-32 p-4 overflow-hidden bg-secondary/20",children:e.jsx("img",{src:s.image,alt:s.name,className:"h-full w-full object-contain transition-all hover:scale-105"})}),e.jsxs("div",{className:"flex flex-col space-y-1.5 p-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"text-black font-semibold text-lg",children:s.name}),e.jsx("div",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-black",children:s.category})]}),e.jsx("p",{className:"text-sm pt-1 text-muted-black line-clamp-2 min-h-[40px]",children:s.description})]}),e.jsx("div",{className:"px-3 py-0",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-black",children:"Stock:"}),e.jsxs("span",{className:"text-green-600",children:[s.quantity," available"]})]})}),e.jsx("div",{className:"items-center p-3 flex gap-2",children:e.jsx("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-white h-8 px-4 py-2 flex-1 bg-orange-500 hover:bg-orange-600",onClick:()=>I(s),disabled:p.includes(s.itemId),children:"Order"})})]},s.itemId))})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-[#5f5f5fe6] flex items-center justify-center z-10",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Your Cart"}),e.jsx("button",{onClick:()=>x(!1),className:"p-1 rounded-full hover:bg-gray-200",children:e.jsx(A,{className:"h-6 w-6"})})]}),l.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Your cart is empty"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4 mb-6",children:l.map(s=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.image,alt:s.name,className:"h-16 w-16 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.category})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:()=>S(s.itemId),children:"Remove"})})]},s.itemId))}),e.jsx("button",{className:"w-full py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",onClick:C,children:"Checkout"})]})]})})]})},B=()=>e.jsx(L,{children:e.jsxs(h,{path:"/",element:e.jsx(H,{}),children:[e.jsx(h,{path:"products",element:e.jsx(T,{})}),e.jsx(h,{path:"orders",element:e.jsx(q,{})})]})});export{B as default};
